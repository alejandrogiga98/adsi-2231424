<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Challenge Calculator JS</title>
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Gentium+Book+Basic:ital,wght@1,400;1,700&display=swap" rel="stylesheet">
    <style>
        div.calculator {
            background: url(imgs/calculator/skin.svg) no-repeat center;
            height: 736px;
            margin: 0px auto;
            position: relative;
            width: 414px;
        }

        /* Mode */
        div.calculator nav.mode{
            left: 145px;
            position: absolute;
            top: 22px;
            width: 120px;
        }

        div.calculator nav.mode a {
            border: 0px solid red;
            display:inline-block;
            height: 40px;
            transition: transform 0.2s ease-in;
            width: 60px;
        }

        div.calculator nav.mode a#dark:hover {
            transform: scale(1.06) translateX(2px);
        }

        div.calculator nav.mode a#light:hover {
            transform: scale(1.06) translateX(-2px);
        }

        div.calculator nav.mode a:last-child {
            margin-left: -5px;
        }

        div.calculator nav.mode a#dark {
            background: url(imgs/calculator/bt-dark.svg) no-repeat center;
        }

        div.calculator nav.mode a#light {
            background: url(imgs/calculator/bt-light.svg) no-repeat center;
        }

        /* display */
        div.calculator div.display{
            border: 0px solid black;
            font-family: 'Gentium Book Basic', serif;
            opacity: 0.5;
            text-align: center;
            width: 350px;
            position: absolute;
            left: 30px;
            top: 100px;
        }

        div.calculator div.display p#operation{
            background-color: #fff;
            border-radius: 15px;
            color: #770000;
            font-size: 24px;
            font-weight: 400;
            height: 35px;
            line-height: 35px;
            margin: 0px;
            width: 380px;
            position: absolute;
            left: -10px;
            
        }

        div.calculator div.display h4#answer{
            background-color: #fff;
            border-radius: 30px;
            color: #770000;
            font-size: 44px;
            font-style: italic;
            font-weight: 700;
            height: 50px;
            margin: 10px 0px 0px 0px;
            width: 380px;
            position: absolute;
            left: -10px;
            top: 35px;
        }

        /* Buttons */
        div.calculator nav.buttons {
            border: 0px solid black;
            height: 470px;
            width: 374px;
            position: absolute;
            left: 20px;
            top: 240px;
        }

        div.calculator nav.buttons ul::selection{
            background-color: transparent;
        }

        div.calculator nav.buttons ul {
            *background-color: green;
            border: 0px solid green;
            margin: 0;
            padding: 0px 0px 0px 5px;
        }

        div.calculator nav.buttons ul li{
            border: 0px solid white;
            border-radius: 28%;
            background-color: none;
            display: inline-block;
            height: 86px;
            margin: 0px 6px 5px 0px;
            transition: transform 0.3s ease-in;
            width: 84px;
        }

        div.calculator nav.buttons ul li:hover {
            cursor: pointer;
            opacity: 1;
            transform: scale(1.1);
        }

        /* div.calculator nav.buttons ul li:active {
            
        } */

        div.calculator nav.buttons ul li:nth-child(4n) {
            margin-right: 0px;
        }

        div.calculator nav.buttons ul li#bt-c {
            background: url(imgs/calculator/btC.svg) no-repeat left;
        }
        div.calculator nav.buttons ul li#bt-del {
            background: url(imgs/calculator/btDel.svg) no-repeat left;
        }
        div.calculator nav.buttons ul li#bt-pow {
            background: url(imgs/calculator/bt^.svg) no-repeat left;
        }
        div.calculator nav.buttons ul li#bt-div {
            background: url(imgs/calculator/btDiv.svg) no-repeat left;
        }
        div.calculator nav.buttons ul li#bt-7 {
            background: url(imgs/calculator/bt7.svg) no-repeat left;
        }
        div.calculator nav.buttons ul li#bt-8 {
            background: url(imgs/calculator/bt8.svg) no-repeat left;
        }
        div.calculator nav.buttons ul li#bt-9 {
            background: url(imgs/calculator/bt9.svg) no-repeat left;
        }
        div.calculator nav.buttons ul li#bt-pro {
            background: url(imgs/calculator/btPro.svg) no-repeat left;
        }
        div.calculator nav.buttons ul li#bt-4 {
            background: url(imgs/calculator/bt4.svg) no-repeat left;
        }
        div.calculator nav.buttons ul li#bt-5 {
            background: url(imgs/calculator/bt5.svg) no-repeat left;
        }
        div.calculator nav.buttons ul li#bt-6 {
            background: url(imgs/calculator/bt6.svg) no-repeat left;
        }
        div.calculator nav.buttons ul li#bt-sub {
            background: url(imgs/calculator/bt-.svg) no-repeat left;
        }
        div.calculator nav.buttons ul li#bt-1 {
            background: url(imgs/calculator/bt1.svg) no-repeat left;
        }
        div.calculator nav.buttons ul li#bt-2 {
            background: url(imgs/calculator/bt2.svg) no-repeat left;
        }
        div.calculator nav.buttons ul li#bt-3 {
            background: url(imgs/calculator/bt3.svg) no-repeat left;
        }
        div.calculator nav.buttons ul li#bt-add {
            background: url(imgs/calculator/bt+.svg) no-repeat left;
        }
        div.calculator nav.buttons ul li#bt-per {
            background: url(imgs/calculator/btPer.svg) no-repeat left;
        }
        div.calculator nav.buttons ul li#bt-0 {
            background: url(imgs/calculator/bt0.svg) no-repeat left;
        }
        div.calculator nav.buttons ul li#bt-point {
            background: url(imgs/calculator/bt\,.svg) no-repeat left;
        }
        div.calculator nav.buttons ul li#bt-equal {
            background: url(imgs/calculator/bt=.svg) no-repeat left;
        }


        /* Dark Mode */
        div.calculator.dark {
            background: url(imgs/calculator/skin-dark.svg) no-repeat center;
        }
        div.calculator.dark nav.mode a#dark {
            background: url(imgs/calculator/bt-dark-active.svg) no-repeat center;
        }
        div.calculator.dark nav.mode a#light {
            background: url(imgs/calculator/bt-light-active.svg) no-repeat center;
        }
        div.calculator.dark div.display p#operation{
            background-color: #fff3;
            color: #ffffff;
        }

        div.calculator.dark div.display h4#answer{
            background-color: #fff3;
            color: #fff;
        }

        div.calculator.dark nav.buttons ul li#bt-c {
            background: url(imgs/calculator/btC-dark.svg) no-repeat left;
        }
        div.calculator.dark nav.buttons ul li#bt-del {
            background: url(imgs/calculator/btDel-dark.svg) no-repeat left;
        }
        div.calculator.dark nav.buttons ul li#bt-pow {
            background: url(imgs/calculator/bt^-dark.svg) no-repeat left;
        }
        div.calculator.dark nav.buttons ul li#bt-div {
            background: url(imgs/calculator/btDiv-dark.svg) no-repeat left;
        }
        div.calculator.dark nav.buttons ul li#bt-7 {
            background: url(imgs/calculator/bt7-dark.svg) no-repeat left;
        }
        div.calculator.dark nav.buttons ul li#bt-8 {
            background: url(imgs/calculator/bt8-dark.svg) no-repeat left;
        }
        div.calculator.dark nav.buttons ul li#bt-9 {
            background: url(imgs/calculator/bt9-dark.svg) no-repeat left;
        }
        div.calculator.dark nav.buttons ul li#bt-pro {
            background: url(imgs/calculator/btPro-dark.svg) no-repeat left;
        }
        div.calculator.dark nav.buttons ul li#bt-4 {
            background: url(imgs/calculator/bt4-dark.svg) no-repeat left;
        }
        div.calculator.dark nav.buttons ul li#bt-5 {
            background: url(imgs/calculator/bt5-dark.svg) no-repeat left;
        }
        div.calculator.dark nav.buttons ul li#bt-6 {
            background: url(imgs/calculator/bt6-dark.svg) no-repeat left;
        }
        div.calculator.dark nav.buttons ul li#bt-sub {
            background: url(imgs/calculator/bt--dark.svg) no-repeat left;
        }
        div.calculator.dark nav.buttons ul li#bt-1 {
            background: url(imgs/calculator/bt1-dark.svg) no-repeat left;
        }
        div.calculator.dark nav.buttons ul li#bt-2 {
            background: url(imgs/calculator/bt2-dark.svg) no-repeat left;
        }
        div.calculator.dark nav.buttons ul li#bt-3 {
            background: url(imgs/calculator/bt3-dark.svg) no-repeat left;
        }
        div.calculator.dark nav.buttons ul li#bt-add {
            background: url(imgs/calculator/bt+-dark.svg) no-repeat left;
        }
        div.calculator.dark nav.buttons ul li#bt-per {
            background: url(imgs/calculator/btPer-dark.svg) no-repeat left;
        }
        div.calculator.dark nav.buttons ul li#bt-0 {
            background: url(imgs/calculator/bt0-dark.svg) no-repeat left;
        }
        div.calculator.dark nav.buttons ul li#bt-point {
            background: url(imgs/calculator/bt,-dark.svg) no-repeat left;
        }
        div.calculator.dark nav.buttons ul li#bt-equal {
            background: url(imgs/calculator/bt=-dark.svg) no-repeat left;
        }
    </style>
</head>
<body>
    <main>
        <header>
            <h1> <span> <a href="index.html">&larr;</a> </span> Background Size</h1>
        </header>
        <section>
            <div class="calculator">
                <nav class="mode">
                    <a href="javascript:;" id="light"></a>
                    <a href="javascript:;" id="dark"></a>
                </nav>
                <div class="display">
                    <p id="operation"></p>
                    <h4 id="answer"></h4>
                </div>
                <nav class="buttons">
                    <ul>
                        <li id="bt-c"></li>
                        <li id="bt-del"></li>
                        <li id="bt-pow"></li>
                        <li id="bt-div"></li>
                        <li id="bt-7"></li>
                        <li id="bt-8"></li>
                        <li id="bt-9"></li>
                        <li id="bt-pro"></li>
                        <li id="bt-4"></li>
                        <li id="bt-5"></li>
                        <li id="bt-6"></li>
                        <li id="bt-sub"></li>
                        <li id="bt-1"></li>
                        <li id="bt-2"></li>
                        <li id="bt-3"></li>
                        <li id="bt-add"></li>
                        <li id="bt-per"></li>
                        <li id="bt-0"></li>
                        <li id="bt-point"></li>
                        <li id="bt-equal"></li>
                    </ul>
                </nav>
            </div>

        </section>
    </main>

    <script>
        // Variables & Constants
        var nchars = 0;
        var operation = document.getElementById('operation');
        var answer = document.getElementById('answer');
        var num1;
        var num2;
        var operator;
        var verification = false;
        

        const skin = document.querySelector('div.calculator');
        const light = document.getElementById('light');
        const dark = document.getElementById('dark');

        const btC = document.getElementById('bt-c');
        const btDel = document.getElementById('bt-del');
        const btPow = document.getElementById('bt-pow');
        const btDiv = document.getElementById('bt-div');
        
        const bt7 = document.getElementById('bt-7');
        const bt8 = document.getElementById('bt-8');
        const bt9 = document.getElementById('bt-9');
        const btPro = document.getElementById('bt-pro');

        const bt4 = document.getElementById('bt-4');
        const bt5 = document.getElementById('bt-5');
        const bt6 = document.getElementById('bt-6');
        const btSub = document.getElementById('bt-sub');

        const bt1 = document.getElementById('bt-1');
        const bt2 = document.getElementById('bt-2');
        const bt3 = document.getElementById('bt-3');
        const btAdd = document.getElementById('bt-add');

        const btPer = document.getElementById('bt-per');
        const bt0 = document.getElementById('bt-0');
        const btPoint = document.getElementById('bt-point');
        const btEqual = document.getElementById('bt-equal');

        // Functions
        function validateLength(){
            if (nchars < 30){
                nchars++;
                return true;
            } else {
                return false;
            }
        }

        function addCharacter(num){
            if (validateLength()){
                operation.innerText += num;
            }
        }

        function clearCharacters(){
            operation.innerText = '';
            answer.innerText = '';
            nchars = 0;
            verification = false;
        }

        function delCharacter(){
            operation.innerText = operation.textContent.toString().slice(0,-1);
            nchars--; 
        }

        function comprobacion(){
            if(verification){
                num1 = answer.textContent;
            }else{
                num1 = operation.textContent
            }
        }

        function resolver(){
            switch(operator){
                case "+":
                    answer.innerText = parseFloat(num1) + parseFloat(num2);
                    operation.innerText = num1 + operator + num2;
                    verification= true;
                    break;
                case "-":
                    answer.innerText = parseFloat(num1) - parseFloat(num2);
                    operation.innerText = num1 + operator + num2;
                    verification= true;
                    break;
                case "x":
                    answer.innerText = parseFloat(num1) * parseFloat(num2);
                    operation.innerText = num1 + operator + num2;
                    verification= true;
                    break;
                case "/":
                    answer.innerText = parseFloat(num1) / parseFloat(num2);
                    operation.innerText = num1 + operator + num2;
                    verification= true;
                    break;
                case "^":
                    answer.innerText = Math.pow(num1, num2)
                    operation.innerText = num1 + operator + num2;
                    verification= true;
                    break;
                case "%":
                    answer.innerText = parseFloat(num1) / 100; 
                    operation.innerText = num1 + operator;
                    verification= true;
                    break;
            }
            if (answer.textContent.length>15){
                answer.innerText = answer.textContent.toString().slice(0,-4);
            }
            
        }

        //Events
        light.onclick = function(){
            skin.classList.remove('dark')
            //this.classList.add('active');
            //dark.classList.remove('active');
        }

        dark.onclick = function(){
            skin.classList.add('dark')
            //this.classList.add('active');
            //light.classList.remove('active');
        }

        btC.onclick = function(){
            clearCharacters();
        }
        btDel.onclick = function(){
            delCharacter();
        }
        btPow.onclick = function() {
            comprobacion();
            addCharacter('^');
            operator = "^"
            clearCharacters();
        }
        btDiv.onclick = function(){
            comprobacion();
            addCharacter('/');
            operator = "/"
            clearCharacters();
        }


        bt7.onclick = function(){
            addCharacter(7);
        }
        bt8.onclick = function(){
            addCharacter(8);
        }
        bt9.onclick = function(){
            addCharacter(9);
        }
        btPro.onclick = function(){
            comprobacion();
            addCharacter('x');
            operator = "x"
            clearCharacters();
        }

        bt4.onclick = function(){
            addCharacter(4);
        }
        bt5.onclick = function(){
            addCharacter(5);
        }
        bt6.onclick = function(){
            addCharacter(6);
        }
        btSub.onclick = function(){
            comprobacion();
            addCharacter("-");
            operator = "-"
            clearCharacters();
        }

        bt1.onclick = function(){
            addCharacter(1);
        }
        bt2.onclick = function(){
            addCharacter(2);
        }
        bt3.onclick = function(){
            addCharacter(3);
        }
        btAdd.onclick = function(){
            comprobacion();
            addCharacter("+");
            operator = "+"
            clearCharacters();
        }

        btPer.onclick = function(){
            num1 = operation.textContent;
            addCharacter("%");
            operator = "%"
            clearCharacters();
        }
        bt0.onclick = function(){
            addCharacter(0);
        }
        btPoint.onclick = function(){
            addCharacter(".");
        }
        btEqual.onclick = function(){
            num2 = operation.textContent;
            resolver()
        }

    </script>
</body>
</html>